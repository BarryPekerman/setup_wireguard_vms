[bastion]
bastion ansible_host={{ bastion_ip }} ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa

[private]
private ansible_host={{ private_ip }} ansible_user=ubuntu ansible_ssh_private_key_file=~/.ssh/id_rsa ansible_ssh_common_args='-o ProxyCommand="ssh -i ~/.ssh/id_rsa -W %h:%p ubuntu@{{ bastion_ip }}"'

[wireguard:children]
bastion
private

[all:vars]
vpc_id={{ vpc_id }}
bastion_public_ip={{ bastion_ip }}
bastion_private_ip={{ bastion_ip }}
private_instance_ip={{ private_ip }}
# SSH tunneling configuration
ansible_ssh_common_args='-o ControlMaster=auto -o ControlPersist=60s -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no'
